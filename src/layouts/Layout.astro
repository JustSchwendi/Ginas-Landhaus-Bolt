---
export interface Props {
  title: string;
  description: string;
  lang?: string;
  ogImage?: string;
  canonical?: string;
}

const { 
  title, 
  description, 
  lang = 'de', 
  ogImage = '/images/og-default.jpg',
  canonical 
} = Astro.props;

const canonicalURL = canonical || new URL(Astro.url.pathname, Astro.site);
const fullOgImageURL = new URL(ogImage, Astro.site);
---

<!doctype html>
<html lang={lang}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    
    <!-- SEO Meta Tags -->
    <title>{title}</title>
    <meta name="description" content={description} />
    <meta name="keywords" content="Ferienhaus Österreich, Airbnb Burgenland, Radtourismus, Fahrradfreundlich, Pinkertal, Eberau, Südburgenland, Gruppenunterkunft" />
    <meta name="author" content="Gina's Landhaus" />
    <meta name="robots" content="index, follow" />
    <link rel="canonical" href={canonicalURL} />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Gina's Landhaus" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={fullOgImageURL} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:image:alt" content="Gina's Landhaus - Ferienhaus im Pinkertal" />
    <meta property="og:locale" content={lang === 'de' ? 'de_AT' : 'en_US'} />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@ginaslandhaus" />
    <meta name="twitter:creator" content="@ginaslandhaus" />
    <meta name="twitter:url" content={canonicalURL} />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={fullOgImageURL} />
    <meta name="twitter:image:alt" content="Gina's Landhaus - Ferienhaus im Pinkertal" />
    
    <!-- Additional SEO -->
    <meta name="theme-color" content="#8B4513" />
    <meta name="msapplication-TileColor" content="#8B4513" />
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="/fonts/inter-var.woff2" as="font" type="font/woff2" crossorigin />
    <link rel="preload" href="/fonts/playfair-display-var.woff2" as="font" type="font/woff2" crossorigin />
    
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://js-cdn.dynatracelabs.com" />
    
    <!-- Language alternatives -->
    {lang === 'de' && <link rel="alternate" hreflang="en" href={`https://ginas-landhaus.at/en${Astro.url.pathname === '/' ? '' : Astro.url.pathname}`} />}
    {lang === 'en' && <link rel="alternate" hreflang="de" href={`https://ginas-landhaus.at${Astro.url.pathname.replace('/en', '') || '/'}`} />}
    <link rel="alternate" hreflang="x-default" href="https://ginas-landhaus.at/" />
  </head>
  <body>
    <slot />
    
    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "LodgingBusiness",
        "name": "Gina's Landhaus im Pinkertal",
        "description": "Charming vacation rental house in Pinkertal, perfect for cycling tourists and nature lovers",
        "url": "https://ginas-landhaus.at",
        "telephone": "+43-664-322-33-69",
        "email": "office@ginas-landhaus.at",
        "image": "https://ginas-landhaus.at/images/og-default.jpg",
        "priceRange": "€€",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "Hauptplatz 11",
          "addressLocality": "Eberau",
          "addressRegion": "Burgenland",
          "postalCode": "7521",
          "addressCountry": "AT"
        },
        "geo": {
          "@type": "GeoCoordinates",
          "latitude": "47.0833",
          "longitude": "16.3167"
        },
        "amenityFeature": [
          {
            "@type": "LocationFeatureSpecification",
            "name": "Bicycle Storage"
          },
          {
            "@type": "LocationFeatureSpecification", 
            "name": "Wine Tasting Nearby"
          },
          {
            "@type": "LocationFeatureSpecification",
            "name": "Free WiFi"
          },
          {
            "@type": "LocationFeatureSpecification",
            "name": "Free Parking"
          },
          {
            "@type": "LocationFeatureSpecification",
            "name": "Garden"
          },
          {
            "@type": "LocationFeatureSpecification",
            "name": "Kitchen"
          }
        ],
        "checkinTime": "15:00",
        "checkoutTime": "11:00",
        "numberOfRooms": "4",
        "maximumAttendeeCapacity": "8",
        "starRating": {
          "@type": "Rating",
          "ratingValue": "5"
        },
        "aggregateRating": {
          "@type": "AggregateRating",
          "ratingValue": "4.9",
          "reviewCount": "127"
        }
      }
    </script>
  </body>
</html>

<style is:global>
  @font-face {
    font-family: 'Inter Variable';
    src: url('/fonts/inter-var.woff2') format('woff2');
    font-weight: 100 900;
    font-style: normal;
    font-display: swap;
  }
  
  @font-face {
    font-family: 'Playfair Display Variable';
    src: url('/fonts/playfair-display-var.woff2') format('woff2');
    font-weight: 400 900;
    font-style: normal;
    font-display: swap;
  }

  :root {
    /* Updated color palette for better accessibility */
    --color-primary: #8B4513;
    --color-secondary: #4A5D23;
    --color-accent: #B8860B; /* Darker gold for better contrast */
    --color-wine: #722F37;
    --color-nature: #556B2F; /* Darker green for better contrast */
    --color-cream: #F5F5DC;
    --color-warm-white: #FEFCF3;
    --color-text: #1A1A1A; /* Darker for better contrast */
    --color-text-light: #404040; /* Darker for better contrast */
    
    /* High contrast link colors for accessibility */
    --color-link: #0066CC; /* Blue with good contrast */
    --color-link-hover: #004499; /* Darker blue for hover */
    --color-link-visited: #663399; /* Purple for visited links */
    --color-link-on-dark: #66B3FF; /* Light blue for dark backgrounds */
    --color-link-on-dark-hover: #99CCFF; /* Lighter blue for hover on dark */
    
    /* Error and success colors with good contrast */
    --color-error: #CC0000;
    --color-success: #006600;
    --color-warning: #CC6600;
    
    --font-body: 'Inter Variable', -apple-system, BlinkMacSystemFont, sans-serif;
    --font-heading: 'Playfair Display Variable', Georgia, serif;
    
    --spacing-xs: 0.5rem;
    --spacing-sm: 1rem;
    --spacing-md: 1.5rem;
    --spacing-lg: 2rem;
    --spacing-xl: 3rem;
    --spacing-2xl: 4rem;
    
    --border-radius: 12px;
    --border-radius-lg: 20px;
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);
    
    /* Enhanced focus ring for better accessibility */
    --focus-ring: 0 0 0 3px rgba(0, 102, 204, 0.5);
    --focus-ring-error: 0 0 0 3px rgba(204, 0, 0, 0.5);
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    scroll-behavior: smooth;
    font-size: 18px; /* Larger base font for better readability */
  }

  body {
    font-family: var(--font-body);
    line-height: 1.7; /* Improved readability */
    color: var(--color-text);
    background-color: var(--color-warm-white);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Enhanced focus states for accessibility compliance */
  *:focus {
    outline: none;
    box-shadow: var(--focus-ring);
  }

  /* Error state focus */
  .error:focus,
  [aria-invalid="true"]:focus {
    box-shadow: var(--focus-ring-error);
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
    line-height: 1.3; /* Better for readability */
    margin-bottom: var(--spacing-md);
    color: var(--color-primary);
    font-weight: 600;
  }

  h1 {
    font-size: clamp(2.25rem, 6vw, 4rem);
    font-weight: 700;
    letter-spacing: -0.02em;
  }

  h2 {
    font-size: clamp(1.75rem, 5vw, 3rem);
    font-weight: 600;
  }

  h3 {
    font-size: clamp(1.5rem, 4vw, 2.25rem);
    font-weight: 600;
  }

  p {
    margin-bottom: var(--spacing-md);
    font-size: 1.125rem; /* Larger text for better readability */
    line-height: 1.8; /* More spacing for better readability */
    max-width: 65ch; /* Optimal reading width */
  }

  /* Improved link accessibility with proper contrast ratios */
  a {
    color: var(--color-link);
    text-decoration: underline;
    transition: all 0.2s ease;
    border-radius: 4px;
  }

  a:hover {
    color: var(--color-link-hover);
    text-decoration: underline;
  }

  a:visited {
    color: var(--color-link-visited);
  }

  a:focus {
    text-decoration: underline;
    outline: none;
    box-shadow: var(--focus-ring);
  }

  /* Links on dark backgrounds */
  .dark-bg a,
  .footer a,
  .page-hero a,
  .cta-section a,
  .contact-booking a {
    color: var(--color-link-on-dark);
  }

  .dark-bg a:hover,
  .footer a:hover,
  .page-hero a:hover,
  .cta-section a:hover,
  .contact-booking a:hover {
    color: var(--color-link-on-dark-hover);
  }

  .dark-bg a:visited,
  .footer a:visited,
  .page-hero a:visited,
  .cta-section a:visited,
  .contact-booking a:visited {
    color: #B399FF; /* Light purple for visited links on dark */
  }

  /* Special styling for navigation links */
  .nav-link {
    color: var(--color-text) !important;
    text-decoration: none !important;
  }

  .nav-link:hover,
  .nav-link.active {
    color: var(--color-wine) !important;
    text-decoration: none !important;
  }

  /* Button styling with proper contrast */
  .btn {
    display: inline-block;
    padding: var(--spacing-md) var(--spacing-xl);
    background: var(--color-accent);
    color: var(--color-text);
    border: 2px solid var(--color-accent);
    border-radius: var(--border-radius);
    font-weight: 600;
    font-size: 1.125rem; /* Larger buttons for better accessibility */
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    min-height: 48px; /* Touch-friendly size */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-sm);
  }

  .btn:hover {
    background: var(--color-wine);
    border-color: var(--color-wine);
    color: white;
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
    text-decoration: none;
  }

  .btn:focus {
    transform: translateY(-1px);
    box-shadow: var(--focus-ring), var(--shadow-md);
    text-decoration: none;
  }

  .btn-secondary {
    background: transparent;
    border: 2px solid var(--color-primary);
    color: var(--color-primary);
  }

  .btn-secondary:hover {
    background: var(--color-primary);
    color: white;
  }

  /* Improved contrast for better accessibility */
  .btn-large {
    padding: var(--spacing-lg) var(--spacing-2xl);
    font-size: 1.25rem;
    min-height: 56px;
    border-radius: var(--border-radius-lg);
  }

  img {
    max-width: 100%;
    height: auto;
    border-radius: var(--border-radius);
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 var(--spacing-md);
  }

  /* Skip link for screen readers */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 6px;
    background: var(--color-primary);
    color: white;
    padding: 8px;
    text-decoration: none;
    border-radius: 4px;
    z-index: 1000;
  }

  .skip-link:focus {
    top: 6px;
  }

  /* Error states for form validation */
  .error {
    border-color: var(--color-error) !important;
    background-color: #FFE6E6;
  }

  .error-message {
    color: var(--color-error);
    font-size: 0.875rem;
    margin-top: var(--spacing-xs);
    font-weight: 600;
  }

  /* Success states */
  .success {
    border-color: var(--color-success) !important;
    background-color: #E6FFE6;
  }

  .success-message {
    color: var(--color-success);
    font-size: 0.875rem;
    margin-top: var(--spacing-xs);
    font-weight: 600;
  }

  @media (max-width: 768px) {
    html {
      font-size: 16px;
    }
    
    .container {
      padding: 0 var(--spacing-sm);
    }
    
    p {
      font-size: 1rem;
    }

    .btn {
      min-height: 52px; /* Larger touch targets on mobile */
      padding: var(--spacing-md) var(--spacing-lg);
    }
  }

  /* High contrast mode support for accessibility */
  @media (prefers-contrast: high) {
    :root {
      --color-text: #000000;
      --color-text-light: #333333;
      --color-link: #0000EE;
      --color-link-hover: #0000AA;
    }
    
    .btn {
      border-width: 3px;
    }
  }

  /* Reduced motion support for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
    
    html {
      scroll-behavior: auto;
    }
  }

  /* Print styles for accessibility */
  @media print {
    * {
      background: white !important;
      color: black !important;
      box-shadow: none !important;
    }
    
    a {
      text-decoration: underline !important;
    }
    
    a[href]:after {
      content: " (" attr(href) ")";
    }
  }
</style>